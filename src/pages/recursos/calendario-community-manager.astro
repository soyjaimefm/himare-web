---
import Layout from "../../layouts/Layout.astro";
import SubscriptionForm from "../../components/SubscriptionForm.astro";
import CloseIcon from "../../components/icons/CloseIcon.astro";
---

<Layout
  title=" - Calendario community Manager Himare"
  description=" - Los festivos no sirven solo para rellenar el calendario de contenido, son oportunidades de conexión con tu audiencia. Mantente al tanto de los momentos más importantes del año descargando este calendario para poder planificar publicaciones con propósito en tus Redes Sociales."
>
  <section class="text-hmblue py-8">
    <div class="container mx-auto font-subtitle p-4 space-y-6">
      <p><a href="/">home</a> - <a href="/recursos">recursos</a> - Calendario community Manager</p>
      <div class="flex flex-col md:flex-row gap-y-8">
        <div class="w-full md:w-4/7">
          <img src="/Calendario-Community-Manager-HIMARE-portada.jpeg" alt="" />
        </div>
        <div class="w-full md:w-3/7 px-8 space-y-2 prose text-hmblue">
          <p class="text-xl">Descripción</p>
          <p class="">
            Los festivos no sirven solo para rellenar el calendario de contenido, son oportunidades de conexión con tu audiencia. Mantente al tanto de los momentos más importantes del año descargando este calendario para poder planificar publicaciones con propósito en tus Redes Sociales. 
          </p>
          <p class="">Puedes descargarlo para verlo desde donde quieras o incluso imprimirlo para revisarlo de vez en cuando.</p>
          <p>
            ¡Ojalá te ayude con tu contenido!<br>Te dejo algunos consejos para utilizarlo:
          </p>
          <ul>
            <li>
              No todos los días son para ti. Selecciona los que conecten con tu marca o comunidad.
            </li>
            <li>
              Si vas a publicar sobre un día en especial, hazlo bien: cuenta una historia, lleva a cabo una acción diferente o crea una campaña que tenga sentido con tus valores de marca.
            </li>
            <li>
              Planifica con antelación, de esta manera tendrás más tiempo para llevar a cabo tus ideas como te gustaría.
            </li>
            <li>
              Este calendario no es de un año en concreto. Los días que tienen un guión en lugar de un número, cambian de día según el año. Asegúrate de comprobar en qué día cae ese año en que lo estás utilizando.
            </li>
          </ul>
          <p>DESCARGA INMEDIATA:</p>
          <p>Descarga el calendario en formato PDF.</p>
          <div class="text-center px-8">
            <button
              id="popupbutton-calendario"
              class="outline-1 w-full outline-hmsoftblue p-3 focus:outline-hmblue bg-hmsoftblue text-hmwhite cursor-pointer"
              >¡Lo quiero!</button
            >
          </div>
        </div>
      </div>
    </div>
  </section>

  <div
    id="popup-calendario"
    role="dialog"
    aria-modal="false"
    aria-label="description"
    data-message="message"
    class="hidden fixed top-0 left-0 w-full h-full place-items-center bg-hmsoftblue z-20"
  >
    <div
      class="font-subtitle aspect-video bg-hmbeige -translate-y-1/2 top-1/2 rounded-lg -translate-x-1/2 left-1/2 w-[90%] p-6 absolute md:p-12 md:w-1/2 2xl:w-1/3 max-w-4xl flex flex-col justify-around"
    >
      <a id="closeIcon-calendario" class="cursor-pointer">
        <CloseIcon class="absolute right-3 top-3" />
      </a>
      <p class="text-md text-hmblue text-center mb-8">
        Introduce tu correo electrónico <br /> para descargar el calendario:
      </p>
      <SubscriptionForm resourceName="calendario-community-manager" />
    </div>
  </div>
</Layout>

<script>
  let cleanup = () => {};

  function setupPopup() {
    const popup = document.querySelector<HTMLDivElement>("#popup-calendario");
    const button = document.querySelector<HTMLButtonElement>("#popupbutton-calendario");
    const closeIcon = document.querySelector<HTMLAnchorElement>("#closeIcon-calendario");

    if (!popup || !button || !closeIcon) {
      console.warn("Popup elements not found");
      return;
    }

    const showPopup = () => {
      popup.classList.remove("hidden");
      popup.setAttribute("aria-modal", "true");
      document.body.style.overflow = "hidden";
    };

    const hidePopup = () => {
      popup.classList.add("hidden");
      popup.setAttribute("aria-modal", "false");
      document.body.style.overflow = "";
    };

    // Event listeners
    button.addEventListener("click", showPopup);
    closeIcon.addEventListener("click", hidePopup);
    
    // Click outside to close
    popup.addEventListener("click", (e) => {
      if (e.target === popup) {
        hidePopup();
      }
    });

    // ESC key to close
    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === "Escape" && popup.getAttribute("aria-modal") === "true") {
        hidePopup();
      }
    };
    document.addEventListener("keydown", handleEscape);

    // Cleanup function
    cleanup = () => {
      button.removeEventListener("click", showPopup);
      closeIcon.removeEventListener("click", hidePopup);
      document.removeEventListener("keydown", handleEscape);
    };
  }

  document.addEventListener("astro:page-load", setupPopup);
  document.addEventListener("astro:before-swap", () => cleanup());
</script>
